From 32bef76b3d7e66ffb78a4b1331a2d88b3eb4f3d9 Mon Sep 17 00:00:00 2001
From: Daniel Margala <danielmargala@lbl.gov>
Date: Sat, 9 Jul 2022 15:09:40 -0700
Subject: [PATCH] add ofi

---
 install.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/install.py b/install.py
index d2f1181..ef93383 100755
--- a/install.py
+++ b/install.py
@@ -402,7 +402,7 @@ calls into NCCL either directly or through some other Legate library.
             + extra_flags
             + (["BOUNDS_CHECKS=1"] if check_bounds else [])
             + (["GASNET=%s" % gasnet_dir] if gasnet_dir is not None else [])
-            + (["CONDUIT=%s" % conduit] if conduit is not None else [])
+            + (["CONDUIT=%s" % conduit.split("-")[0]] if conduit is not None else [])
             + (["CUDA=%s" % cuda_dir] if cuda_dir is not None else [])
         )
 
@@ -959,7 +959,7 @@ def driver():
         dest="conduit",
         action="store",
         required=False,
-        choices=["ibv", "ucx", "aries", "mpi", "udp"],
+        choices=["ibv", "ucx", "aries", "mpi", "udp", "ofi-slingshot10", "ofi-slingshot11"],
         default=os.environ.get("CONDUIT"),
         help="Build Legate with specified GASNet conduit.",
     )
-- 
2.34.1

